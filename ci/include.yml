# base ci is included here to enable includes from other projects
include:
- project: tq-em/public/build/base
  file: ci/include.yml
  ref: v2.0.3
  rules:
    - if: '$BASE_CI_REF'
      when: never
    - if: '$CI_COMMIT_TAG'
    - if: '$CI_COMMIT_BRANCH =~ /^release/ || $CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^release/'

- project: tq-em/public/build/base
  file: ci/include.yml
  ref: main
  rules:
    - if: '$BASE_CI_REF || $CI_COMMIT_TAG'
      when: never
    - if: '$CI_COMMIT_BRANCH =~ /^release/ || $CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^release/'
      when: never
    - when: always

- project: tq-em/public/build/base
  file: ci/include.yml
  ref: $BASE_CI_REF
  rules:
    - if: '$BASE_CI_REF'

- local: ci/yocto.yml

